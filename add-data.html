<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SecureVault - Add Data</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #1a1d29 0%, #2d3748 100%); }
        .category-card { transition: all 0.3s ease; }
        .category-card.selected { transform: scale(1.02); box-shadow: 0 8px 25px rgba(74, 144, 226, 0.3); }
        .category-card:active { transform: scale(0.98); }
        .form-step { transition: all 0.5s ease; }
        .form-step.hidden { opacity: 0; transform: translateX(20px); }
        .password-strength { transition: width 0.3s ease; }
        .encryption-animation { animation: encrypt 2s infinite; }
        @keyframes encrypt {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }
        .floating-save { 
            position: fixed; 
            bottom: 80px; 
            right: 20px; 
            z-index: 50;
            box-shadow: 0 8px 25px rgba(34, 197, 94, 0.3);
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="gradient-bg text-white p-4">
        <div class="flex items-center justify-between mb-4">
            <button onclick="goBack()" class="p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"/>
                </svg>
            </button>
            <h1 class="text-lg font-semibold">Add to Vault</h1>
            <button onclick="showHelp()" class="p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"/>
                </svg>
            </button>
        </div>
    </header>

    <!-- Progress Indicator -->
    <div class="bg-white px-4 py-3 border-b border-gray-200">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-2">
                <div id="step1" class="w-6 h-6 bg-blue-600 text-white rounded-full flex items-center justify-center text-xs font-medium">1</div>
                <div class="w-8 h-0.5 bg-gray-200"></div>
                <div id="step2" class="w-6 h-6 bg-gray-200 text-gray-500 rounded-full flex items-center justify-center text-xs font-medium">2</div>
                <div class="w-8 h-0.5 bg-gray-200"></div>
                <div id="step3" class="w-6 h-6 bg-gray-200 text-gray-500 rounded-full flex items-center justify-center text-xs font-medium">3</div>
            </div>
            <span class="text-sm text-gray-500" id="stepLabel">Choose Category</span>
        </div>
    </div>

    <!-- Main Content -->
    <main class="px-4 py-6 pb-20">
        <!-- Step 1: Category Selection -->
        <div id="categoryStep" class="form-step">
            <h2 class="text-xl font-semibold mb-6 text-gray-800">What would you like to secure?</h2>
            
            <div class="grid grid-cols-2 gap-4 mb-6">
                <div class="category-card bg-white border-2 border-gray-200 rounded-xl p-4 cursor-pointer" onclick="selectCategory('password', this)">
                    <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mb-3">
                        <svg class="w-6 h-6 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 8a6 6 0 01-7.743 5.743L10 14l-1 1-1 1H6v2H2v-4l4.257-4.257A6 6 0 1118 8zm-6-4a1 1 0 100 2 2 2 0 012 2 1 1 0 102 0 4 4 0 00-4-4z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    <h3 class="font-semibold text-gray-800 mb-1">Password</h3>
                    <p class="text-xs text-gray-500">Login credentials</p>
                </div>

                <div class="category-card bg-white border-2 border-gray-200 rounded-xl p-4 cursor-pointer" onclick="selectCategory('note', this)">
                    <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mb-3">
                        <svg class="w-6 h-6 text-purple-600" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                            <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 102 0V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 2a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    <h3 class="font-semibold text-gray-800 mb-1">Secure Note</h3>
                    <p class="text-xs text-gray-500">Encrypted text</p>
                </div>

                <div class="category-card bg-white border-2 border-gray-200 rounded-xl p-4 cursor-pointer" onclick="selectCategory('card', this)">
                    <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mb-3">
                        <svg class="w-6 h-6 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z"/>
                            <path fill-rule="evenodd" d="M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    <h3 class="font-semibold text-gray-800 mb-1">Payment Card</h3>
                    <p class="text-xs text-gray-500">Credit/debit card</p>
                </div>

                <div class="category-card bg-white border-2 border-gray-200 rounded-xl p-4 cursor-pointer" onclick="selectCategory('document', this)">
                    <div class="w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center mb-3">
                        <svg class="w-6 h-6 text-orange-600" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    <h3 class="font-semibold text-gray-800 mb-1">Document</h3>
                    <p class="text-xs text-gray-500">Secure file</p>
                </div>
            </div>

            <button id="continueBtn" onclick="goToStep2()" class="w-full bg-gray-200 text-gray-400 font-medium py-3 rounded-xl cursor-not-allowed" disabled>
                Continue
            </button>
        </div>

        <!-- Step 2: Data Entry -->
        <div id="dataStep" class="form-step hidden">
            <div class="bg-white rounded-xl p-4 mb-6 shadow-sm">
                <div class="flex items-center space-x-3 mb-4">
                    <div id="categoryIcon" class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                        <svg class="w-5 h-5 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 8a6 6 0 01-7.743 5.743L10 14l-1 1-1 1H6v2H2v-4l4.257-4.257A6 6 0 1118 8zm-6-4a1 1 0 100 2 2 2 0 012 2 1 1 0 102 0 4 4 0 00-4-4z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    <div>
                        <h3 id="categoryTitle" class="font-semibold text-gray-800">Password Entry</h3>
                        <p id="categorySubtitle" class="text-xs text-gray-500">Secure your login credentials</p>
                    </div>
                </div>

                <!-- Dynamic Form Fields -->
                <div id="formFields">
                    <!-- Password Form (Default) -->
                    <div id="passwordForm">
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Title</label>
                            <input type="text" id="title" placeholder="e.g., Gmail Account" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Username/Email</label>
                            <input type="text" id="username" placeholder="your@email.com" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                            <div class="relative">
                                <input type="password" id="password" placeholder="Enter password" class="w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <button type="button" onclick="togglePassword()" class="absolute right-3 top-2.5 text-gray-400">
                                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.78zm4.261 4.26l1.4 1.4a2.5 2.5 0 013.536 3.536l1.4 1.4a4 4 0 00-5.336-5.336z" clip-rule="evenodd"/>
                                    </svg>
                                </button>
                            </div>
                            <div class="mt-2">
                                <div class="flex items-center justify-between text-xs">
                                    <span class="text-gray-500">Password Strength</span>
                                    <span id="strengthText" class="text-red-500 font-medium">Weak</span>
                                </div>
                                <div class="w-full h-2 bg-gray-200 rounded-full mt-1">
                                    <div id="strengthBar" class="password-strength w-0 h-full bg-red-500 rounded-full"></div>
                                </div>
                            </div>
                        </div>
                        <button type="button" onclick="generatePassword()" class="w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2 rounded-lg mb-4 transition-colors">
                            Generate Strong Password
                        </button>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Website/URL (Optional)</label>
                            <input type="url" id="url" placeholder="https://gmail.com" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                    </div>

                    <!-- Note Form -->
                    <div id="noteForm" class="hidden">
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Title</label>
                            <input type="text" id="noteTitle" placeholder="e.g., Banking PIN" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Content</label>
                            <textarea id="noteContent" rows="6" placeholder="Enter your secure note here..." class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"></textarea>
                        </div>
                    </div>

                    <!-- Card Form -->
                    <div id="cardForm" class="hidden">
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Card Name</label>
                            <input type="text" id="cardName" placeholder="e.g., Chase Visa" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Card Number</label>
                            <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" oninput="formatCardNumber(this)">
                        </div>
                        <div class="grid grid-cols-2 gap-3 mb-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Expiry Date</label>
                                <input type="text" id="expiry" placeholder="MM/YY" maxlength="5" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" oninput="formatExpiry(this)">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">CVV</label>
                                <input type="text" id="cvv" placeholder="123" maxlength="4" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                        </div>
                    </div>

                    <!-- Document Form -->
                    <div id="documentForm" class="hidden">
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Document Name</label>
                            <input type="text" id="docName" placeholder="e.g., Passport Scan" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Upload Document</label>
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-400 transition-colors">
                                <svg class="w-8 h-8 text-gray-400 mx-auto mb-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V8a2 2 0 00-2-2h-5L9 4H4zm3 5a1 1 0 000 2h6a1 1 0 100-2H7z" clip-rule="evenodd"/>
                                </svg>
                                <p class="text-sm text-gray-500 mb-2">Tap to upload or drag and drop</p>
                                <p class="text-xs text-gray-400">PDF, JPG, PNG up to 10MB</p>
                                <input type="file" class="hidden" accept=".pdf,.jpg,.jpeg,.png" onchange="handleFileUpload(this)">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Tags (Optional)</label>
                    <input type="text" id="tags" placeholder="work, personal, banking" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <p class="text-xs text-gray-500 mt-1">Separate tags with commas</p>
                </div>
            </div>

            <div class="flex space-x-3">
                <button onclick="goToStep1()" class="flex-1 bg-gray-100 text-gray-700 font-medium py-3 rounded-xl transition-colors">
                    Back
                </button>
                <button onclick="goToStep3()" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 rounded-xl transition-colors">
                    Continue
                </button>
            </div>
        </div>

        <!-- Step 3: Security Options -->
        <div id="securityStep" class="form-step hidden">
            <h2 class="text-xl font-semibold mb-6 text-gray-800">Security Options</h2>
            
            <div class="bg-white rounded-xl p-4 mb-6 shadow-sm">
                <div class="flex items-center justify-between mb-4">
                    <div>
                        <h3 class="font-medium text-gray-800">Individual Encryption</h3>
                        <p class="text-xs text-gray-500">Extra layer of security for this item</p>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" id="individualEncryption" class="sr-only peer" checked>
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                    </label>
                </div>

                <div class="bg-blue-50 rounded-lg p-3 mb-4">
                    <div class="flex items-center space-x-2">
                        <div class="encryption-animation">
                            <svg class="w-5 h-5 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                            </svg>
                        </div>
                        <div>
                            <p class="text-sm font-medium text-blue-800">Encryption Active</p>
                            <p class="text-xs text-blue-600">Your data will be encrypted before storage</p>
                        </div>
                    </div>
                </div>

                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Auto-Lock Duration</label>
                    <select id="autoLock" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="immediate">Immediate</option>
                        <option value="1min">1 minute</option>
                        <option value="5min" selected>5 minutes</option>
                        <option value="15min">15 minutes</option>
                        <option value="1hour">1 hour</option>
                    </select>
                </div>

                <div class="flex items-center justify-between">
                    <div>
                        <h3 class="font-medium text-gray-800">Require Biometric</h3>
                        <p class="text-xs text-gray-500">Face ID to access this item</p>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" id="requireBiometric" class="sr-only peer">
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                    </label>
                </div>
            </div>

            <div class="flex space-x-3">
                <button onclick="goToStep2()" class="flex-1 bg-gray-100 text-gray-700 font-medium py-3 rounded-xl transition-colors">
                    Back
                </button>
                <button onclick="saveData()" class="flex-1 bg-green-600 hover:bg-green-700 text-white font-medium py-3 rounded-xl transition-colors">
                    Save to Vault
                </button>
            </div>
        </div>
    </main>

    <!-- Success Animation Overlay -->
    <div id="successOverlay" class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl p-8 text-center mx-4">
            <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg class="w-8 h-8 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                </svg>
            </div>
            <h3 class="text-lg font-semibold text-gray-800 mb-2">Item Secured</h3>
            <p class="text-gray-600 text-sm">Your data has been encrypted and saved</p>
        </div>
    </div>

    <script>
        let selectedCategory = '';
        let currentStep = 1;

        function selectCategory(category, element) {
            // Remove previous selection
            document.querySelectorAll('.category-card').forEach(card => {
                card.classList.remove('selected', 'border-blue-500');
                card.classList.add('border-gray-200');
            });
            
            // Add selection to clicked card
            element.classList.add('selected', 'border-blue-500');
            element.classList.remove('border-gray-200');
            
            selectedCategory = category;
            
            // Enable continue button
            const continueBtn = document.getElementById('continueBtn');
            continueBtn.classList.remove('bg-gray-200', 'text-gray-400', 'cursor-not-allowed');
            continueBtn.classList.add('bg-blue-600', 'hover:bg-blue-700', 'text-white');
            continueBtn.disabled = false;
        }

        function goToStep1() {
            showStep(1);
        }

        function goToStep2() {
            if (!selectedCategory) return;
            
            showStep(2);
            setupForm();
        }

        function goToStep3() {
            if (validateForm()) {
                showStep(3);
            }
        }

        function showStep(step) {
            // Hide all steps
            document.querySelectorAll('.form-step').forEach(stepDiv => {
                stepDiv.classList.add('hidden');
            });
            
            // Show current step
            if (step === 1) {
                document.getElementById('categoryStep').classList.remove('hidden');
                document.getElementById('stepLabel').textContent = 'Choose Category';
            } else if (step === 2) {
                document.getElementById('dataStep').classList.remove('hidden');
                document.getElementById('stepLabel').textContent = 'Enter Details';
            } else if (step === 3) {
                document.getElementById('securityStep').classList.remove('hidden');
                document.getElementById('stepLabel').textContent = 'Security Options';
            }
            
            // Update progress indicators
            for (let i = 1; i <= 3; i++) {
                const stepEl = document.getElementById(`step${i}`);
                if (i <= step) {
                    stepEl.classList.remove('bg-gray-200', 'text-gray-500');
                    stepEl.classList.add('bg-blue-600', 'text-white');
                } else {
                    stepEl.classList.remove('bg-blue-600', 'text-white');
                    stepEl.classList.add('bg-gray-200', 'text-gray-500');
                }
            }
            
            currentStep = step;
        }

        function setupForm() {
            // Hide all forms
            document.querySelectorAll('[id$="Form"]').forEach(form => {
                form.classList.add('hidden');
            });
            
            // Show selected form
            const formMap = {
                'password': 'passwordForm',
                'note': 'noteForm',
                'card': 'cardForm',
                'document': 'documentForm'
            };
            
            const formId = formMap[selectedCategory];
            if (formId) {
                document.getElementById(formId).classList.remove('hidden');
                
                // Update header
                const headers = {
                    'password': { title: 'Password Entry', subtitle: 'Secure your login credentials', icon: 'blue' },
                    'note': { title: 'Secure Note', subtitle: 'Create encrypted text', icon: 'purple' },
                    'card': { title: 'Payment Card', subtitle: 'Secure card information', icon: 'green' },
                    'document': { title: 'Document Upload', subtitle: 'Secure file storage', icon: 'orange' }
                };
                
                const header = headers[selectedCategory];
                document.getElementById('categoryTitle').textContent = header.title;
                document.getElementById('categorySubtitle').textContent = header.subtitle;
                
                // Update icon
                const iconEl = document.getElementById('categoryIcon');
                iconEl.className = `w-10 h-10 bg-${header.icon}-100 rounded-lg flex items-center justify-center`;
            }
        }

        function validateForm() {
            // Basic validation - check required fields
            const requiredFields = {
                'password': ['title', 'username', 'password'],
                'note': ['noteTitle', 'noteContent'],
                'card': ['cardName', 'cardNumber', 'expiry', 'cvv'],
                'document': ['docName']
            };
            
            const fields = requiredFields[selectedCategory] || [];
            let isValid = true;
            
            fields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field && !field.value.trim()) {
                    field.classList.add('border-red-500');
                    isValid = false;
                } else if (field) {
                    field.classList.remove('border-red-500');
                }
            });
            
            if (!isValid) {
                alert('Please fill in all required fields.');
            }
            
            return isValid;
        }

        function togglePassword() {
            const passwordField = document.getElementById('password');
            passwordField.type = passwordField.type === 'password' ? 'text' : 'password';
        }

        function generatePassword() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*';
            let password = '';
            for (let i = 0; i < 16; i++) {
                password += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            
            document.getElementById('password').value = password;
            updatePasswordStrength(password);
        }

        function updatePasswordStrength(password) {
            const strengthBar = document.getElementById('strengthBar');
            const strengthText = document.getElementById('strengthText');
            
            let strength = 0;
            if (password.length >= 8) strength += 25;
            if (/[a-z]/.test(password)) strength += 25;
            if (/[A-Z]/.test(password)) strength += 25;
            if (/[0-9!@#$%^&*]/.test(password)) strength += 25;
            
            strengthBar.style.width = strength + '%';
            
            if (strength < 50) {
                strengthBar.className = 'password-strength w-' + strength + ' h-full bg-red-500 rounded-full';
                strengthText.textContent = 'Weak';
                strengthText.className = 'text-red-500 font-medium';
            } else if (strength < 75) {
                strengthBar.className = 'password-strength w-' + strength + ' h-full bg-yellow-500 rounded-full';
                strengthText.textContent = 'Medium';
                strengthText.className = 'text-yellow-500 font-medium';
            } else {
                strengthBar.className = 'password-strength w-' + strength + ' h-full bg-green-500 rounded-full';
                strengthText.textContent = 'Strong';
                strengthText.className = 'text-green-500 font-medium';
            }
        }

        function formatCardNumber(input) {
            let value = input.value.replace(/\s/g, '').replace(/[^0-9]/gi, '');
            let formattedValue = value.match(/.{1,4}/g)?.join(' ') || value;
            input.value = formattedValue;
        }

        function formatExpiry(input) {
            let value = input.value.replace(/\D/g, '');
            if (value.length >= 2) {
                value = value.substring(0, 2) + '/' + value.substring(2, 4);
            }
            input.value = value;
        }

        function handleFileUpload(input) {
            const file = input.files[0];
            if (file) {
                // Simulate file upload
                const uploadArea = input.parentElement;
                uploadArea.innerHTML = `
                    <div class="text-center">
                        <svg class="w-8 h-8 text-green-600 mx-auto mb-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                        </svg>
                        <p class="text-sm font-medium text-gray-800">${file.name}</p>
                        <p class="text-xs text-gray-500">Ready to encrypt</p>
                    </div>
                `;
            }
        }

        function saveData() {
            // Show success animation
            document.getElementById('successOverlay').classList.remove('hidden');
            
            // Animate success
            anime({
                targets: '#successOverlay > div',
                scale: [0.8, 1],
                opacity: [0, 1],
                duration: 500,
                easing: 'easeOutBack'
            });
            
            // Redirect after animation
            setTimeout(() => {
                window.location.href = 'index.html';
            }, 2000);
        }

        function goBack() {
            if (currentStep > 1) {
                showStep(currentStep - 1);
            } else {
                window.location.href = 'index.html';
            }
        }

        function showHelp() {
            alert('Help: Choose a category, enter your data securely, and configure security options. All data is encrypted before storage.');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Add password strength checker
            document.getElementById('password')?.addEventListener('input', function() {
                updatePasswordStrength(this.value);
            });
            
            // Animate category cards
            anime({
                targets: '.category-card',
                translateY: [20, 0],
                opacity: [0, 1],
                duration: 600,
                delay: anime.stagger(100),
                easing: 'easeOutQuad'
            });
        });
    </script>
</body>
</html>